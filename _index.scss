@import "helpers";

$hms-scale-factor: 8;
$hms-base-font-size: 1rem;
$hms-line-height-unit: 0.25rem;
$hms-use-calc: false;

@mixin hms-sizes($font-size-degree: 0, $line-height-degree: null) {
  $font-size-degree: trunc($font-size-degree);
  $n: $hms-scale-factor;
  $m: $hms-scale-factor - $font-size-degree;

  @if $font-size-degree == 0 {
    font-size: $hms-base-font-size;
  } @else if $hms-use-calc {
    font-size: calc(#{$hms-base-font-size} * #{$n} / #{$m});
  } @else {
    font-size: $hms-base-font-size * $n / $m;
  }

  @if type-of($line-height-degree) == number {
    @include hms-sizes-line-height($font-size-degree, $line-height-degree);
  }
}

@mixin hms-sizes-line-height($font-size-degree: 0, $line-height-degree: 0) {
  $font-size-degree: trunc($font-size-degree);
  $line-height-degree: trunc($line-height-degree);
  $font-size: $hms-base-font-size * $hms-scale-factor / ($hms-scale-factor - $font-size-degree);
  $line-height-multiple: 1;

  @while $hms-line-height-unit * $line-height-multiple < $font-size {
    $line-height-multiple: $line-height-multiple + 1;
  }

  $n: ($line-height-multiple + $line-height-degree) * ($hms-scale-factor - $font-size-degree);
  $m: $hms-scale-factor * ($hms-base-font-size / $hms-line-height-unit);

  @if $n == $m {
    line-height: 1;
  }  @else if $hms-use-calc {
    line-height: calc(1em * #{$n} / #{$m});
  } @else {
    line-height: $n / $m;
  }
}
